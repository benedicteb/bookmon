# Session Learnings - 2026-02-21

## What was done

- Upgraded all dependencies in Cargo.toml to latest compatible versions
- Major version bumps: inquire 0.7->0.9, scraper 0.23->0.25, indicatif 0.17->0.18
- Minor version bumps: tokio, async-trait, regex, uuid, tempfile
- Updated all transitive dependencies via `cargo update`
- Verified all 102 tests pass, no clippy warnings, formatting clean

## Key decisions

- Kept `serde_yaml` 0.9 despite deprecation because the replacement `serde_yml` is at v0.0.12 (too immature) and the `config` crate still depends on `serde_yaml`
- Capped `uuid` at `<1.21` because v1.21+ requires Rust 1.85 (we're on 1.83) via `getrandom 0.4` which uses `edition2024`
- Capped `tempfile` at `<3.25` for the same reason (tempfile 3.25 also pulls in `getrandom 0.4`)
- Pinned `native-tls` to 0.2.14 because 0.2.18 requires `security-framework >=3.5.1` which also uses `edition2024`
- Did not upgrade `reqwest` to 0.13 (major version) because it changes the default TLS backend to rustls and disables `query`/`form` features by default; the semver-compatible 0.12.28 already includes many improvements
- Did not upgrade `pretty-table` as it's still at 0.1.3 (no new versions available)

## Gotchas / surprises

- Rust 1.83 cannot even *parse* Cargo.toml manifests using `edition2024` - it fails at the download/manifest-parse stage, not at compilation. This means even transitive dependencies with edition2024 break the build entirely.
- `cargo update` with a version like `"1.17"` means `>=1.17, <2.0` - it does NOT pin to 1.17.x. Need explicit range constraints like `">=1.17, <1.21"` to cap at a specific minor version.
- `security-framework` went from 2.x to 3.x with edition2024, and `native-tls` 0.2.18 bumped its minimum requirement to 3.5.1, creating a transitive incompatibility. The fix requires pinning `native-tls` to an older patch version.
- Multiple crates simultaneously adopted `edition2024`/Rust 1.85 requirements (getrandom 0.4, security-framework 3.x), creating a "cliff" for older toolchains.

## Open questions

- When should we upgrade the Rust toolchain to 1.85+ to unlock uuid 1.21+, tempfile 3.25+, reqwest 0.13, and native-tls 0.2.18?
- Should `serde_yaml` be replaced with a different YAML library when the `config` crate drops its dependency?
